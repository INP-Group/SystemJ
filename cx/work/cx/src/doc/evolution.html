<HTML>
<HEAD>
<TITLE>Формат файла blklist.lst</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="style.css">
</HEAD>
<BODY>

<H1>Эволюция системы CX и ее компонентов</H1>

<H2>CX вообще</H2>

<P>Первоначально CX появилась для решения локальной задачи --
автоматизации ВЧ-стенда накопителя-охладителя ВЭПП-5 в 1996г.  Первый
вариант предназначался для замены ПО, использовавшего хоть и
клиент-серверную, но немультиплексирующую систему ITUS (другое название
-- itools).  ITUS обеспечивала работу с микроконтроллерами на базе
процессоров Inmos T414/T805 (транспьютер), применявшимися в
CAMAC-контроллерах.

<P>Название системы, известной сейчас как "CX", со временем менялось.

<TABLE ALIGN=center BORDER=1 CELLSPACING=0>

<TR VALIGN=top><TH>Год</TH><TH>Название</TH><TH>Комментарий</TH></TR>

<TR VALIGN=top><TD>1996</TD><TD>dcam, scam</TD><TD>

<P>"Driver-based CAMac control", "Server-based CAMac control".  Реально
даже не столько система, сколько технический проект -- общий дизайн. 
Основные идеи брались как развитие системы, использовавшейся на ВЭПП-4
(BANK на Одрятах).  Идеология разрабатывалась под руководством
Ю.И.Эйдельмана.  Единственным целевым железом предполагался CAMAC, под
управлением единственного типа контроллеров -- транспьютеров.

</TD></TR>

<TR VALIGN=top><TD>1997</TD><TD>ucam</TD><TD>

<P>"Unix-based CAMac control".  Первый вариант реализации. 
Использовался на ВЧ-стенде накопителя-охладителя ВЭПП-5.  <I>(Название
было изменено, поскольку, во-первых, "scam" -- несколько ругательное
слово, а во-вторых -- такая аббревиатура уже использовалась в computer
science (SCAM=="SCSI Configuration Automatically ").)</I>

</TD></TR>

<TR VALIGN=top><TD>1998</TD><TD>ucam</TD><TD>

<P>Дальнейшее развитие, проработка деталей.

<P>Добавлена поддержка множественных транспьютерных крейт-контроллеров,
подключаемых по топологии "дерево", при этом одним сервером может
обслуживаться до 4 независимых, "корневых" транспьютеров.

<P>Выпущен препринт ИЯФ 98-53, Д.Ю.Болховитянов, Р.Г.Громов,
И.Л.Пивоваров, Ю.И.Эйдельман, <I>&laquo;Проект программного обеспечения
системы управления комплексом ВЭПП-5&raquo;</I>, в котором содержалось
детальное описание идеологии, использовавшейся при разработке системы,
сетевого протокола, выбранных технических решений, а также клиентского
API для доступа к серверу.

</TD></TR>

<TR VALIGN=top><TD>1999</TD><TD>cx</TD><TD>

<P>"Control for uniX" (первоначально -- "Camac for uniX").  Название
было предложено И.Пивоваровым.

<P>Начало реального, "рабочего" использования системы на ВЭПП-5, а не
только на ВЧ-стенде или в тестовом режиме.

<P>Дерево исходных файлов "жило" по адресу
<TT>jupiter:/export/jupiter/cx/</TT> и модифицировалось несколькими
авторами одновременно.

</TD></TR>

<TR VALIGN=top><TD>2000</TD><TD>cx, ncx</TD><TD>

<P>"NCX" (New CX) -- название проекта-ветви, предполагавшегося в
качестве дальнейшего развития CX, в котором клиентская библиотека cxlib
при обрыве соединения с сервером обеспечивала его автоматическое
восстановление, прозрачно для прикладной программы.  В силу не очень
удачно выбранных дизайнерских решений этот вариант cxlib получился
весьма некрасивым и, как следствие, не очень подходящим для развития и
модификации в будущем.  В дальнейшем было решено добавить логику
восстановления соединения "уровнем выше", и некоторые идеи из ncx были
использованы в библиотеке cda.

</TD></TR>

<TR VALIGN=top><TD>2001</TD><TD>curcx</TD><TD>

!!!!!03.07.2001 (судя по <TT>~/work/ipp/{Makefile,ref_drv.sc}</TT> --
первые эксперименты с загружаемыми драйверами.

</TD></TR>

<TR VALIGN=top><TD>2002</TD><TD>curcx, cx</TD><TD>


</TD></TR>

<TR VALIGN=top><TD>2003</TD><TD>cx</TD><TD>


</TD></TR>

</TABLE>


<H2>CX-сервер</H2>


<H2>CX-протокол</H2>


<H2>cxlib</H2>


<H2>Chl</H2>

<P>Chl (Cx High-level Library) родилась для автоматизации создания
пользовательского интерфейса и "хитрого" обсчета каналов (в частности,
для конверсии между физическими и логическими каналами).  Она включала
в себя собственно пользовательский интерфейс (создание окошек, "ручек"
каналов управления), и обсчет каналов (включая работу с "формулами"). 
<I>(Первый вариант (1997-1998гг.) назывался "uxil" -- "Ucam X Interface
Library", и являлся вынесенным в отдельную библиотеку куском DRC --
программы управления ВЧ-стендом.)</I>

<P>Но через некоторое время стало очевидно, что такой "монолитный"
дизайн весьма неудобен.  Основных причин две: во-первых, многие
компоненты Chl хотелось использовать в других программах, никак к Chl
не относящихся; во-вторых, библиотека стала выглядеть как "куча мала",
что противоречит принципам фрагментации и инкапсуляции и, как
следствие, сказывалось на качестве кода.

<P>Поэтому при переходе от "curcx" к "cx" сразу было запланировано
разделение Chl на несколько библиотек.  Это разделение происходило
постепенно с конца 2002г. по вторую половину 2003г.  Библиотеки
выделялись в двух направлениях: пользовательский интерфейс <I>(на
диаграмме изображены выше Chl -- ближе к пользователю)</I> и работа с
данными <I>(изображены ниже Chl -- ближе к серверу)</I>.

<TABLE ALIGN=center BORDER=1 CELLSPACING=0>

<TR><TD ALIGN=center><PRE>
+-------+
|  Chl  |
+-------+
</PRE></TD></TR>

<TR>

<TD ALIGN=center><PRE>
|
V
</PRE></TD>

<TD ROWSPAN=2 VALIGN=top>На первом этапе (ноябрь 2002г.) менеджмент
окон, "тулбары" и "тултипы" ушли в отдельную библиотеку -- Xh. Сама же
библиотека Chl, в предверии разделения, была переименована в "oldChl".

<P>Кроме того, расстановка содержимого элементов управления в
регулярной сетке была переведена с "ручной" привязки в форме к
автоматической при помощи менеджера-сетки.  Сам виджет
"менеджер-сетка" содержится в новой библиотеке AuxMotifWidgets (на
диаграмме -- AMW).</TD>

</TR>

<TR><TD ALIGN=center><PRE>
+-------+
|Xh+AMW |
+-------+
+-------+
|oldChl |
+-------+
</PRE></TD></TR>

<TR>

<TD ALIGN=center><PRE>
|
V
</PRE></TD>

<TD ROWSPAN=2 VALIGN=top>На втором этапе (март/апрель 2003г.) модуль установления соединения
с сервером (и переподключения при обрыве), а также обсчета "формул"
перешел в библиотеку cda (Cx Data Access).

<P>Cda является абсолютно независимой от пользовательского интерфейса
библиотекой, которая может использоваться в паре с cxlib в консольных
приложениях.</TD>

</TR>

<TR><TD ALIGN=center><PRE>
+-------+
|Xh+AMW|
+-------+
+-------+
|oldChl |
+-------+
+-------+
|  cda  |
+-------+
</PRE></TD></TR>

<TR>

<TD ALIGN=center><PRE>
|
V
</PRE></TD>

<TD ROWSPAN=2 VALIGN=top>На третьем этапе в отдельные библиотеки ушли: модуль,
отвечающий за "ручки" управления -- Knobs, и модуль, отвечающий за
представление данных и, по совместительству, за их обсчет -- Cdr (Cx
Data Representation).  Остававшиеся фрагменты oldChl были перенесены (пройдя
аудит и переписывание) в библиотеку под названием просто "Chl".
"oldChl" перестала существовать.</TD>

</TR>

<TR><TD ALIGN=center><PRE>
+-------+
|Xh+AMW |
+-------+
   ^  +-------+
   |  | Knobs |
   v  +-------+
+-------+  ^
|  Chl  |  |
+-------+  v
   ^  +-------+
   |  |  Cdr  |
   v  +-------+
+-------+
|  cda  |
+-------+
</PRE></TD></TR>

</TABLE>

<P>Общий план предусматривает в дальнейшей перспективе полное
"отделение" от библиотеки Motif.  По-видимому, это будет сделано при
помощи студенческого проекта GRL.  При этом вся зависимость от
конкретной библиотеки или уйдет в GRL целиком, или, что более вероятно
на первых этапах, будет присутствовать также в Xh и Knobs.

</BODY>
</HTML>

