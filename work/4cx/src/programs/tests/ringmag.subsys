include(`magx_macros.m4')

sysname ringmag
defserver v2cx::ringmag.ringmag
wintitle main "Магнитная система накопителя"

define(`RINGMAG_SECTION',
       `
        noop - " " hlabel
        noop - $1  hlabel
        noop - " " hlabel
        noop - " " hlabel
        noop - " " hlabel
        noop - " " hlabel
       ')

grouping main RINGMAG_grouping "Магнитная система" grid \
        str1:"Задано, A\tИзм., A\td/dT\t\t" \
        param1:6 content:eval(6*32) {
    RINGMAG_SECTION("Впуск-П")
    MAGX_X1K_XCDAC20_LINE(m_1l0,  `"1L0"',      "ИП2: В-1000",   m_1l0,  1000, 1)
    MAGX_X1K_XCDAC20_LINE(m_1l1,  `"1L1"',      "ИП2: В-1000",   m_1l1,  1000, 1)
    MAGX_X1K_XCDAC20_LINE(m_1l2,  `"1L2, 1L6"', "ИП2: В-1000",   m_1l2,  1000, 1)
    MAGX_X1K_XCDAC20_LINE(m_1l3,  `"1L3, 1L5"', "ИП2: В-1000",   m_1l3,  1000, 1)
    MAGX_X1K_XCDAC20_LINE(m_1l4,  `"1L4, 1L8"', "ИП2: В-1000",   m_1l4,  1000, 1)
    MAGX_IST_XCDAC20_LINE(m_1l7,  `"1l7, 1L9"', "ИП1: И-В-1000", m_1l7,  1000, 1, 0, 0)
    MAGX_XCH300_LINE(     m_1l10, "1L10",       "ИП1: ВЧ-400",   m_1l10, 1000.0)
    MAGX_XCH300_LINE(     m_1l11, "1L11",       "ИП1: ВЧ-400",   m_1l11, 1000.0)
    RINGMAG_SECTION("Впуск-Э")
    MAGX_IST_XCDAC20_LINE(m_1m5,  `"1M5-1M7"',  "ИП1: ИСТ",      m_1m5,  1000, 1, 0, 0)
    MAGX_XCH300_LINE(     m_2l1,  "2L1",        "ИП1: ВЧ-400",   m_2l1,  1000.0)
    MAGX_XCH300_LINE(     m_2l2,  "2L2",        "ИП1: ВЧ-400",   m_2l2,  1000.0)
    MAGX_XCH300_LINE(     m_2l3,  "2L3",        "ИП1: ВЧ-400",   m_2l3,  1000.0)
    MAGX_XCH300_LINE(     m_2l4,  "2L4",        "ИП1: ВЧ-400",   m_2l4,  1000.0)
    MAGX_XCH300_LINE(     m_2l5,  "2L5",        "ИП1: ВЧ-400",   m_2l5,  1000.0)
    RINGMAG_SECTION("Кольцо")
    MAGX_IST_XCDAC20_LINE(m_rm1, `"RM1-RM8"',   "ИП1: ИСТ",      m_rm1,  1000, 1, 0, 0)
    MAGX_IST_XCDAC20_LINE(m_sm1, `"SM1, SM2"',  "ИП1: И-В-1000", m_sm1,  1000, 1, 0, 0)
    MAGX_IST_XCDAC20_LINE(m_d1,  `"D1"',        "ИП1: И-В-1000", m_d1,   1000, 1, 0, 0)
    MAGX_IST_XCDAC20_LINE(m_f1,  `"F1, F2"',    "ИП1: ИСТ",      m_f1,   1000, 1, 0, 0)
    MAGX_IST_XCDAC20_LINE(m_f4,  `"F4"',        "ИП1: ИСТ",      m_f4,   1000, 1, 0, 0)
    MAGX_IST_XCDAC20_LINE(m_d2,  `"D2"',        "ИП1: ИСТ",      m_d2,   1000, 1, 0, 0)
    MAGX_IST_XCDAC20_LINE(m_d3,  `"D3"',        "ИП1: ИСТ",      m_d3,   1000, 1, 0, 0)
    MAGX_IST_XCDAC20_LINE(m_f3,  `"F3"',        "ИП1: ИСТ",      m_f3,   1000, 1, 0, 0)
    RINGMAG_SECTION("Выпуск")
    MAGX_IST_XCDAC20_LINE(m_3m4, `"3M4, 3M5"',  "ИП1: И-В-1000", m_3m4,  1000, 1, 0, 0)
    MAGX_IST_XCDAC20_LINE(m_4m4, `"4M4, 4M5"',  "ИП1: И-В-1000", m_4m4,  1000, 1, 0, 0)
    MAGX_IST_XCDAC20_LINE(m_3m1, `"3M1, 3M3"',  "ИП1: И-В-1000", m_3m1,  1000, 1, 0, 0)
    MAGX_IST_XCDAC20_LINE(m_4m1, `"4M1, 4M3"',  "ИП1: И-В-1000", m_4m1,  1000, 1, 0, 0)
    MAGX_IST_XCDAC20_LINE(m_r13, `"R#13"',      "ИП1: ИСТ",      m_r13,  1000, 1, 0, 1) # rev
    MAGX_IST_XCDAC20_LINE(m_r14, `"R#14"',      "ИП1: ИСТ",      m_r14,  1000, 1, 0, 1) # rev
}
